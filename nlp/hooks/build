#!/bin/sh

TRANSFORMERS=3.3.1
DATASETS=1.1.2
LIGHTNING=1.0.1
HYDRA=1.0.3
FAISS=1.6.3

TAG=hczhu/nlp:transformers${TRANSFORMERS}-datasets${DATASETS}-pl${LIGHTNING}-hydra${HYDRA}-faiss${FAISS}

DOCKER_BUILDKIT=1 docker build \
    -t $TAG \
    --build-arg TRANSFORMERS=${TRANSFORMERS} \
    --build-arg DATASETS=${DATASETS} \
    --build-arg LIGHTNING=${LIGHTNING} \
    --build-arg HYDRA=${HYDRA} \
    --build-arg FAISS=${FAISS} .

docker push ${TAG}
docker tag ${TAG} hczhu/nlp:latest
